<div class="row">
    <div class="col-md-6">
        <div class="panel panel-default">
            <div class="panel-heading">
                <h3 class="panel-title">Backup Database</h3>
            </div>
            <div class="panel-body">
                <pre style="height: 400px;">
    aturan_pakai<br>
    bahasa_pasien<br>
    bangsal<br>
    bank<br>
    barcode<br>
    beri_obat_operasi<br>
    berkas_digital_perawatan<br>
    bidang<br>
    booking_operasi<br>
    booking_periksa<br>
    booking_periksa_balasan<br>
    booking_periksa_diterima<br>
    booking_registrasi<br>
    bpjs_prb<br>
    bridging_rujukan_bpjs<br>
    bridging_sep<br>
    bridging_sep_internal<br>
    bridging_srb_bpjs<br>
    bridging_surat_kontrol_bpjs<br>
    bridging_surat_pri_bpjs<br>
    cacat_fisik<br>
    catatan_perawatan<br>
    databarang<br>
    departemen<br>
    detail_pemberian_obat<br>
    detail_periksa_lab<br>
    diagnosa_pasien<br>
    dokter<br>
    dpjp_ranap<br>
    emergency_index<br>
    gambar_radiologi<br>
    golongan_barang<br>
    gudangbarang<br>
    hasil_radiologi<br>
    icd9<br>
    industrifarmasi<br>
    inventaris<br>
    inventaris_barang<br>
    inventaris_jenis<br>
    inventaris_kategori<br>
    inventaris_merk<br>
    inventaris_peminjaman<br>
    inventaris_produsen<br>
    inventaris_ruang<br>
    jabatan<br>
    jadwal<br>
    jadwal_pegawai<br>
    jadwal_tambahan<br>
    jam_jaga<br>
    jam_masuk<br>
    jenis<br>
    jnj_jabatan<br>
    jns_perawatan<br>
    jns_perawatan_inap<br>
    jns_perawatan_lab<br>
    jns_perawatan_radiologi<br>
    kabupaten<br>
    kamar<br>
    kamar_inap<br>
    kategori_barang<br>
    kategori_penyakit<br>
    kategori_perawatan<br>
    kecamatan<br>
    kelompok_jabatan<br>
    kelurahan<br>
    kodesatuan<br>
    laporan_operasi<br>
    maping_dokter_dpjpvclaim<br>
    maping_dokter_pcare<br>
    maping_poliklinik_pcare<br>
    maping_poli_bpjs<br>
    master_aturan_pakai<br>
    master_berkas_digital<br>
    master_masalah_keperawatan<br>
    metode_racik<br>
    mlite_akun_kegiatan<br>
    mlite_antrian_loket<br>
    mlite_antrian_referensi<br>
    mlite_antrian_referensi_batal<br>
    mlite_antrian_referensi_taskid<br>
    mlite_apamregister<br>
    mlite_billing<br>
    mlite_bridging_pcare<br>
    mlite_detailjurnal<br>
    mlite_duitku<br>
    mlite_fenton<br>
    mlite_geolocation_presensi<br>
    mlite_jurnal<br>
    mlite_login_attempts<br>
    mlite_modules<br>
    mlite_notifications<br>
    mlite_odontogram<br>
    mlite_ohis<br>
    mlite_pengaduan<br>
    mlite_pengaduan_detail<br>
    mlite_penilaian_awal_keperawatan_gigi<br>
    mlite_penilaian_awal_keperawatan_ralan<br>
    mlite_penilaian_awal_keperawatan_ranap<br>
    mlite_penilaian_medis_igd<br>
    mlite_penilaian_medis_ralan<br>
    mlite_penilaian_medis_ranap<br>
    mlite_penilaian_ulang_nyeri<br>
    mlite_penjualan<br>
    mlite_penjualan_barang<br>
    mlite_penjualan_billing<br>
    mlite_penjualan_detail<br>
    mlite_peta_mukosa_rongga_mulut<br>
    mlite_rekening<br>
    mlite_rekeningtahun<br>
    mlite_remember_me<br>
    mlite_satu_sehat_departemen<br>
    mlite_satu_sehat_lokasi<br>
    mlite_satu_sehat_mapping_praktisi<br>
    mlite_satu_sehat_response<br>
    mlite_settings<br>
    mlite_subrekening<br>
    mlite_surat_rujukan<br>
    mlite_surat_sakit<br>
    mlite_surat_sehat<br>
    mlite_temporary<br>
    mlite_triase<br>
    mlite_triase_detail<br>
    mlite_triase_pemeriksaan<br>
    mlite_triase_skala<br>
    mlite_users<br>
    mlite_users_vedika<br>
    mlite_vedika<br>
    mlite_vedika_feedback<br>
    mlite_veronisa<br>
    mlite_veronisa_feedback<br>
    mutasi_berkas<br>
    obatbhp_ok<br>
    obat_racikan<br>
    operasi<br>
    opname<br>
    paket_operasi<br>
    pasien<br>
    pegawai<br>
    pemeliharaan_inventaris<br>
    pemeriksaan_ralan<br>
    pemeriksaan_ranap<br>
    pendidikan<br>
    penjab<br>
    penyakit<br>
    perbaikan_inventaris<br>
    periksa_lab<br>
    periksa_radiologi<br>
    permintaan_detail_permintaan_lab<br>
    permintaan_lab<br>
    permintaan_pemeriksaan_lab<br>
    permintaan_pemeriksaan_radiologi<br>
    permintaan_perbaikan_inventaris<br>
    permintaan_radiologi<br>
    personal_pasien<br>
    perusahaan_pasien<br>
    petugas<br>
    poliklinik<br>
    propinsi<br>
    prosedur_pasien<br>
    rawat_inap_dr<br>
    rawat_inap_drpr<br>
    rawat_inap_pr<br>
    rawat_jl_dr<br>
    rawat_jl_drpr<br>
    rawat_jl_pr<br>
    reg_periksa<br>
    rekap_presensi<br>
    resep_dokter<br>
    resep_dokter_racikan<br>
    resep_dokter_racikan_detail<br>
    resep_obat<br>
    resep_pulang<br>
    resiko_kerja<br>
    resume_pasien<br>
    resume_pasien_ranap<br>
    riwayat_barang_medis<br>
    ruang_ok<br>
    set_keterlambatan<br>
    set_no_rkm_medis<br>
    skdp_bpjs<br>
    spesialis<br>
    stts_kerja<br>
    stts_wp<br>
    suku_bangsa<br>
    tambahan_biaya<br>
    template_laboratorium<br>
    temporary_presensi<br>
    utd_donor<br>
    utd_komponen_darah<br>
    utd_pendonor<br>
    utd_stok_darah<br>
    ===============================
    Total : 191 tabel
                </pre>
            </div>
            <div class="panel-footer">
                <a href="http://localhost/klinikweb/admin/settings/backupdatabase?t=558291723ab7" data-toggle="modal" data-target="#backupModal" class="btn btn-primary">Go Backup</a>
            </div>
        </div>
    </div>
    <div class="col-md-6">
        <div class="panel panel-default">
            <div class="panel-heading">
                <h3 class="panel-title">Restore Database</h3>
            </div>
            <div class="panel-body">
                <p>
                    Silahkan pilih file database yang mau dihapus. Tindakan ini bersifat permanen. 
                </p>
                <input type="hidden" name="t" value="558291723ab7">
                            </div>
            <div class="panel-footer">
                <button type="button" id="restore_database" class="btn btn-primary">Restore</button>
                <button type="button" id="download_database" class="btn btn-warning">Download</button>
                <button type="button" id="delete_database" class="btn btn-danger">Delete</button>
            </div>                        
        </div>
    </div>
</div>

<div class="modal fade" id="backupModal" tabindex="-1" role="dialog">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title">Bantuan mLITE</h4>
            </div>
            <div class="modal-body">
                loading ......
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary" data-dismiss="modal">Tutup</button>
            </div>
        </div>
    </div>
</div>
<script>
    var baseURL = mlite.url + '/' + mlite.admin;
    $('#restore_database').on('click', function(event) {
        var file_name = $('input[name="files"]:checked').val();
        event.preventDefault();
        var loadURL =  baseURL + '/settings/restoredatabase?t=' + mlite.token + '&filename=' + file_name;

        var modal = $('#backupModal');
        var modalContent = $('#backupModal .modal-content');

        modal.off('show.bs.modal');
        modal.on('show.bs.modal', function () {
            modalContent.load(loadURL);
        }).modal();
    });
    $('#download_database').on('click', function(event) {
        var file_name = $('input[name="files"]:checked').val();
        event.preventDefault();
        window.open(mlite.url + '/backups/' + file_name, file_name);
    });
    $('#delete_database').on('click', function(event) {
        var file_name = $('input[name="files"]:checked').val();
        event.preventDefault();
        bootbox.confirm("Apakah Anda yakin ingin menghapus data ini?", function(result){
            // ketika ditekan tombol ok
            if (result){
                $.get(baseURL + '/settings/deletedatabase?t=' + mlite.token + '&filename=' + file_name,function(data) {
                    location.reload();
                });
            }
        }); 
    });

</script>